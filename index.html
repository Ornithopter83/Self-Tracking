<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose"></script>
    <style>
        body {
            margin: 0;
            background: #000;
            overflow: hidden;
        }

        video {
            width: 100vw;
            height: 100vh;
            object-fit: contain;
            transform: scaleX(-1);
        }

        #status {
            position: fixed;
            top: 10;
            left: 10;
            color: #0f0;
            z-index: 10;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div id="status">연결 대기 중 (C# Script Waiting...)</div>
    <video id="input_video" autoplay playsinline muted></video>

    <script>
        // C#에서 호출할 수 있도록 전역 변수로 설정
        var videoElement = document.getElementById('input_video');
        var statusElement = document.getElementById('status');

        // C#으로 데이터 전송하는 공통 함수
        function sendToCSharp(data) {
            if (window.chrome && window.chrome.webview) {
                window.chrome.webview.postMessage(JSON.stringify(data));
            }
        }

        console.log("Bridge Ready.");
    </script>
</body>
</html>